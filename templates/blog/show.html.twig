{% block stylesheet %}
    <link rel="stylesheet" href="{{ asset('css/showblog.css') }}">
{% endblock %}
{% block body %}
    <header>
        {% include 'navbar/navbar.html.twig' %}
    </header>
    <div class="blog-post">
        <h1>{{ blog.title }}</h1>
        <p class="date-time">by {{ blog.user.username }} on {{ blog.createdAt|date('F j, Y') }}</p>
        <p class="blog-body">{{ blog.body }}</p>

        {% if blog.user == app.user %}
            <div class="blog-actions">
                <a href="{{ path('blog_edit', {'id': blog.id}) }}" class="btn btn-primary">Edit</a>
                <form method="post" action="{{ path('blog_delete', {'id': blog.id}) }}" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this blog post?');">
                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ blog.id) }}">
                    <button type="submit" class="btn btn-danger">Delete</button>
                </form>
            </div>
        {% endif %}

        <a href="{{ path('blog_list') }}" class ="back-btn"><</a>
        <!-- Display comments -->
        <div class="comments">
            <h3>Comments:</h3>
            {% for comment in comments %}
                <div class="comment">
                    <p><strong>{{ comment.user.username }}:</strong> {{ comment.content }}</p>
                    <p><small>{{ comment.createdAt|date('F j, Y \a\t H:i') }}</small></p>
                </div>
            {% else %}
                <p>No comments yet.</p>
            {% endfor %}
        </div>

     {% if app.user %}
    <div class="add-comment">
        <h3>Add a comment:</h3>
        {{ form_start(commentForm, {'action': path('add_comment', {'id': blog.id}), 'method': 'post', 'attr': {'class': 'comment-form'}}) }}
        {{ form_widget(commentForm) }}
        <button type="submit" class="btn btn-primary">Submit</button>
        {{ form_end(commentForm) }}
    </div>
{% else %}
    <p>You need to be logged in to add a comment <a href="{{ path('app_login') }}"> Login here</a> </p>
{% endif %}

{% endblock %}
